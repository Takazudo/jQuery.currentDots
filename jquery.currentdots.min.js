/*! jQuery.currentDots (https://github.com/Takazudo/jQuery.currentDots)
 * lastupdate: 2013-05-31
 * version: 0.1.0
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){var t=[].slice,i={}.hasOwnProperty,e=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(function(i){var n;return n={},n.Event=function(){function i(){}return i.prototype.on=function(t,i){var e,n,s,o,c;for(null==this._callbacks&&(this._callbacks={}),e=t.split(" "),o=0,c=e.length;c>o;o++)n=e[o],(s=this._callbacks)[n]||(s[n]=[]),this._callbacks[n].push(i);return this},i.prototype.once=function(t,i){return this.on(t,function(){return this.off(t,arguments.callee),i.apply(this,arguments)}),this},i.prototype.trigger=function(){var i,e,n,s,o,c,a;if(i=arguments.length>=1?t.call(arguments,0):[],n=i.shift(),s=null!=(a=this._callbacks)?a[n]:void 0){for(o=0,c=s.length;c>o&&(e=s[o],e.apply(this,i)!==!1);o++);return this}},i.prototype.off=function(t,i){var e,n,s,o,c,a;if(!t)return this._callbacks={},this;if(s=null!=(a=this._callbacks)?a[t]:void 0,!s)return this;if(!i)return delete this._callbacks[t],this;for(n=o=0,c=s.length;c>o;n=++o)if(e=s[n],e===i){s=s.slice(),s.splice(n,1),this._callbacks[t]=s;break}return this},i}(),n.DotItem=function(t){function s(t,e){this.$el=t,this.active=null,this.options=i.extend({},n.DotItem.defaults,e),this._eventify(),this.deactivate()}return e(s,t),s.defaults={index:null,class_activeItem:null,class_inactiveItem:null},s.prototype._eventify=function(){var t=this;return this.$el.bind("click",function(i){var e;return i.preventDefault(),e={index:t.options.index},t.trigger("click",e)}),this},s.prototype.deactivate=function(){return this.active===!1?this:(this.active=!1,this.$el.removeClass(this.options.class_activeItem),this.options.class_inactiveItem&&this.$el.addClass(this.options.class_inactiveItem),this)},s.prototype.activate=function(){return this.active===!0?this:(this.active=!0,this.$el.addClass(this.options.class_activeItem),this.options.class_inactiveItem&&this.$el.removeClass(this.options.class_inactiveItem),this)},s}(n.Event),n.DotCollection=function(t){function s(t,e){this.$el=t,this.options=i.extend({},n.DotCollection.defaults,e),this._createItems(),"number"===i.type(this.options.initialActiveIndex)&&this.to(this.options.initialActiveIndex)}return e(s,t),s.defaults={selector_item:null,class_activeItem:null,initialActiveIndex:0},s.prototype._createItems=function(){var t=this;return this._items=[],this.$el.find(this.options.selector_item).each(function(e,s){var o,c;c={class_activeItem:t.options.class_activeItem,index:e},t.options.class_inactiveItem&&(c.class_inactiveItem=t.options.class_inactiveItem),o=new n.DotItem(i(s),c),o.on("click",function(i){return t.to(i.index),t.trigger("itemclick",i)}),t._items.push(o)}),this},s.prototype.deactivateWithout=function(t){var i,e,n,s;for(s=this._items,e=0,n=s.length;n>e;e++)i=s[e],i!==t&&i.deactivate();return this},s.prototype.activate=function(t){var i,e,n,s;for(s=this._items,e=0,n=s.length;n>e;e++)if(i=s[e],i===t){i.activate();break}return this},s.prototype.to=function(t){var i;return i=this._items[t],this.deactivateWithout(i),this.activate(i),this},s}(n.Event),i.fn.currentDots=function(t){return this.each(function(e,s){var o,c;o=i(s),c=new n.DotCollection(o,t),o.data("currentDots",c)})},i.CurrentDotsNs=n,i.CurrentDots=n.DotCollection})(jQuery,window,document)}).call(this);